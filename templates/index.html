{% extends "base.html" %}

{% block content %}
<div class="hero">
    <div class="hero-content">
        <h1>Professional PDF Imposition & Layout Visualization</h1>
        <p class="hero-subtitle">The Free, Secure, and Easy Way to Prepare Files for Printing</p>
        <p class="hero-description">
            CutStack transforms your single-page PDFs into print-ready imposed sheets.
            Perfect for business cards, flyers, and booklets‚Äîno expensive software required.
        </p>
        <div class="hero-buttons">
            <a href="#tool-section" class="cta-button">Jump to Tool</a>
            <a href="#learn-more" class="secondary-button"
                style="margin-left: 10px; color: white; border: 1px solid white; padding: 12px 24px; border-radius: 6px; text-decoration: none;">Learn
                More</a>
        </div>
    </div>
</div>

<div id="learn-more" class="content-section" style="padding: 60px 20px; max-width: 1000px; margin: 0 auto;">
    <div class="info-block" style="margin-bottom: 60px;">
        <h2>What is CutStack?</h2>
        <p>
            CutStack is a specialized online tool designed to bridge the gap between digital design and physical
            production.
            When you print professional documents like business cards, postcards, or zines, you typically don't print
            just one page at a time.
            Instead, you print multiple copies on a large sheet of paper to save time and reduce waste.
        </p>
        <p>
            This process is called <strong>Imposition</strong>. CutStack automates this complex process using a specific
            technique called "Cut & Stack" (or Stack Imposition).
            It takes your PDF file, calculates the optimal layout, and rearranges the pages so that after you print and
            cut the stack,
            your pages are already in perfect sequential order.
        </p>
    </div>

    <div class="info-block" style="margin-bottom: 60px;">
        <h2>Who is this tool for?</h2>
        <div class="features-grid"
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; margin-top: 30px;">
            <div class="feature-item">
                <h3>üñ®Ô∏è Small Print Shops</h3>
                <p>Automate your prepress workflow without investing in expensive enterprise software like Fiery or
                    various plugins.</p>
            </div>
            <div class="feature-item">
                <h3>üé® Graphic Designers</h3>
                <p>Deliver print-ready files to your clients that are set up correctly for production, saving them time
                    and money.</p>
            </div>
            <div class="feature-item">
                <h3>üè† DIY Enthusiasts</h3>
                <p>Create professional-looking wedding invites, zines, or trading cards from the comfort of your home
                    printer.</p>
            </div>
        </div>
    </div>

    <div class="info-block" style="margin-bottom: 60px;">
        <h2>Why "Cut & Stack" Imposition?</h2>
        <p>
            Standard imposition simply repeats the same image (Step & Repeat), which leaves you with multiple piles of
            identical pages that must be sorted manually.
            CutStack arranges pages <em>sequentially</em> down through the stack.
        </p>
        <p>
            <strong>The Benefit:</strong> You can cut the entire stack of paper at once, pile the resulting small stacks
            on top of each other,
            and your 500-page document is immediately ready to bind. It eliminates hours of manual collation.
        </p>
    </div>

    <div class="features-section">
        <div class="feature-card">
            <h3>üöÄ Instant Visualization</h3>
            <p>See exactly how your document will be laid out before you print. Our interactive grid shows front and
                back
                styling, cut lines, and page ordering.</p>
        </div>
        <div class="feature-card">
            <h3>‚úÇÔ∏è Smart Stacking</h3>
            <p>CutStack arranges pages so that when you cut the stack, the pages are already in the correct order. No
                more
                manual collating required.</p>
        </div>
        <div class="feature-card">
            <h3>üîí Private & Secure</h3>
            <p>Your files are processed in-memory and never permanently stored on our servers. What you upload stays
                yours.
            </p>
        </div>
    </div>
</div>

<div id="tool-section" class="tool-wrapper"
    style="background: #f8fafc; padding: 60px 20px; border-top: 1px solid #e2e8f0;">
    <div class="header-tool" style="text-align: center; margin-bottom: 40px;">
        <h2>Start Imposing Your PDF</h2>
        <p>Upload your file below to generate your print-ready layout.</p>
    </div>

    <form action="/process" method="post" enctype="multipart/form-data" id="uploadForm"
        style="max-width: 800px; margin: 0 auto; background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">
        <div class="controls">
            <div class="control-grid">
                <div class="control-item">
                    <label>Upload PDF File</label>
                    <input type="file" name="pdf_file" id="pdf_file" class="file-input-styled" accept=".pdf" required>
                    <small>Select the document to impose</small>
                </div>

                <div class="control-item">
                    <label for="pagesPerSheet">Pages Per Sheet (One Side)</label>
                    <select id="pagesPerSheet" name="pages_per_sheet_n" class="form-select">
                        <option value="1">1 (Full Page)</option>
                        <option value="2">2 (1√ó2)</option>
                        <option value="4" selected>4 (2√ó2)</option>
                        <option value="6">6 (2√ó3)</option>
                        <option value="8">8 (2√ó4)</option>
                        <option value="9">9 (3√ó3)</option>
                        <option value="10">10 (2√ó5)</option>
                        <option value="12">12 (3√ó4)</option>
                        <option value="15">15 (3√ó5)</option>
                        <option value="16">16 (4√ó4)</option>
                        <option value="20">20 (4√ó5)</option>
                        <option value="24">24 (4√ó6)</option>
                        <option value="25">25 (5√ó5)</option>
                        <option value="30">30 (5√ó6)</option>
                        <option value="32">32 (4√ó8)</option>
                        <option value="36">36 (6√ó6)</option>
                    </select>
                    <!-- Hidden input to send "Pages Per Side" to backend -->
                    <input type="hidden" name="n_up" id="hidden_n_up" value="4">
                    <small>Number of pages on front side (N-Up)</small>
                </div>

                <div class="control-item" style="display:none;">
                    <label for="pageInput">Input Pages (Detected)</label>
                    <input type="number" id="pageInput" value="0" min="1" max="500" readonly
                        style="background-color: #f3f4f6; cursor: default;">
                    <small>Number of pages in uploaded PDF</small>
                </div>

                <div class="control-item">
                    <label for="layoutMode">Layout Mode</label>
                    <select id="layoutMode" class="form-select">
                        <option value="print-safe">Print-Safe (with margins)</option>
                        <option value="compact">Compact (edge-to-edge)</option>
                    </select>
                    <small>Affects cell spacing in visualization</small>
                </div>
            </div>

            <div class="preset-buttons" style="margin-top: 20px;">
                <button type="button" class="preset-btn" onclick="setConfig(4, 0)">2√ó2 (4-Up)</button>
                <button type="button" class="preset-btn" onclick="setConfig(9, 0)">3√ó3 (9-Up)</button>
                <button type="button" class="preset-btn" onclick="setConfig(16, 0)">4√ó4 (16-Up)</button>
                <button type="button" class="preset-btn" onclick="setConfig(25, 0)">5√ó5 (25-Up)</button>
                <button type="button" class="preset-btn" onclick="setConfig(36, 0)">6√ó6 (36-Up)</button>
            </div>
        </div>

        <div class="action-buttons">
            <button type="button" class="generate-btn" onclick="generateImposition()">üöÄ Refresh Visualization</button>
            <button type="submit" class="download-btn">üì• Download Imposed PDF</button>
        </div>

        <div id="pageCountDisplay" class="page-count-display"></div>
    </form>

    <div class="stats" id="stats"></div>

    <div class="cutting-guide">
        <h3>‚úÇÔ∏è Cutting Instructions</h3>
        <p>
            After duplex printing, cut the sheet along the grid lines (between columns and rows).
            Each resulting stack will have pages in perfect sequential order with odd pages on front
            and even pages on back. For example, cutting a 4-column sheet produces 4 stacks, each
            maintaining proper page pairing.
        </p>
    </div>

    <div class="visualization" id="visualization"></div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-box odd"></div>
            <div class="legend-text">Odd Pages (Front Side)</div>
        </div>
        <div class="legend-item">
            <div class="legend-box even"></div>
            <div class="legend-text">Even Pages (Back Side)</div>
        </div>
        <div class="legend-item">
            <div class="legend-box blank"></div>
            <div class="legend-text">Blank Padding</div>
        </div>
    </div>
</div>

<div class="content-section faq-section" style="max-width: 800px; margin: 60px auto;">
    <h2>Frequently Asked Questions</h2>

    <div class="faq-item" style="margin-bottom: 20px;">
        <h3>Is my data safe?</h3>
        <p>Absolutely. We prioritize your privacy. Files are processed entirely in-memory and are immediately discarded
            after processing. We do not store, view, or share your documents.</p>
    </div>

    <div class="faq-item" style="margin-bottom: 20px;">
        <h3>How much does it cost?</h3>
        <p>CutStack is currently 100% free to use. We rely on unintrusive advertising to keep our servers running.</p>
    </div>

    <div class="faq-item" style="margin-bottom: 20px;">
        <h3>What if my PDF has different page sizes?</h3>
        <p>We recommend standardizing your page sizes before upload. However, our engine will attempt to center your
            pages within the imposition grid.</p>
    </div>

    <div class="faq-item" style="margin-bottom: 20px;">
        <h3>Do I need to install anything?</h3>
        <p>No. CutStack is entirely web-based. You can access it from any device with a modern web browser.</p>
    </div>
</div>
{% endblock %}